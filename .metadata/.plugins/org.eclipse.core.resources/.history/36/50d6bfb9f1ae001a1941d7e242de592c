<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.community">

	<insert id="createCommunity" parameterType="int">
		INSERT INTO COMMUNITY
		VALUES(COM_SEQUENCE.NEXTVAL,#{pro_num})
	</insert>
	
	<select id="checkCommunity" parameterType="int" resultType="int">
		SELECT COM_NUM
		FROM COMMUNITY
		WHERE PRO_NUM=#{pro_num}
	</select>
	
	<select id="fundingList" parameterType="int" resultType="FundingListDto">
		SELECT *
		FROM FUNDING_LIST
		WHERE PRO_NUM = #{pro_num}
	</select>
	
	<select id="fundingUser" parameterType="String" resultType="UserDto">
		SELECT U.*
		FROM USER_TB U
		WHERE U.USER_ID IN (SELECT FUND.USER_ID
							FROM (SELECT ROWNUM , FUNDING_LIST.USER_ID
        							FROM FUNDING_LIST
        							WHERE ROWNUM <7 AND PRO_NUM=#{pro_num}) FUND)
	</select>
	
</mapper>