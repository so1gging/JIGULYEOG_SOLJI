<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.cheerMessage">

	<!-- write -->
	<insert id="writeCheerMessage" parameterType="CheerMessageDto">
		INSERT INTO CHEER_MESSAGE
		VALUES (CHEER_SEQUENCE.NEXTVAL,#{pro_num},#{user_id},#{cheer_content},#{cheer_date})
	</insert>


	<!-- Paging : totalArticle -->
	<select id="totalArticle" resultType="int" parameterType="int">
		SELECT COUNT(*)
		FROM CHEER_MESSAGE
		WHERE PRO_NUM = #{pro_num}
	</select>	
	
	<!-- Paging : getArticlelist -->
	<select id="getArticleList" resultType="CheerMessageDto" parameterType="java.util.HashMap">
		SELECT C.CHEER_NUM,C.PRO_NUM,C.USER_ID,C.CHEER_CONTENT, TO_DATE(C.CHEER_DATE, "yyyy-MM-dd") CHEER_DATE
		FROM (SELECT ROWNUM RN,CHEER_MESSAGE.*
        		FROM (SELECT * FROM CHEER_MESSAGE ORDER BY CHEER_NUM DESC) CHEER_MESSAGE ) C
		WHERE RN BETWEEN #{startRow} AND #{endRow}
	</select>
	
	<select id="getCheerMessageOne" resultType="CheerMessageDto" parameterType="int">
		SELECT *
		FROM CHEER_MESSAGE
		WHERE PRO_NUM = #{pro_num}
		ORDER BY CHEER_NUM DESC
	</select>

	
</mapper>